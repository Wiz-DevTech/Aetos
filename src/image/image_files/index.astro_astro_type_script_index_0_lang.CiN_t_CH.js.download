import{g as r}from"./index.Brfk6Bdo.js";import{S as l}from"./ScrollTrigger.6qCihK2t.js";class a extends HTMLElement{wrapper;currentSlide={number:null,element:null};slides;constructor(){super(),this.slides=this.querySelectorAll(".sticky-slider__item"),this.init()}init(){this.setUpSlideAnimation(),this.watchToRefreshScrollTrigger(),this.setTextFadeInOut()}watchToRefreshScrollTrigger(){const o={rootMargin:"0px 0px 0px 0px",threshold:0};new IntersectionObserver((t,s)=>{t[0].isIntersecting&&(window.requestAnimationFrame(()=>{l.refresh(!0)}),s.disconnect())},o).observe(this);let i=this.getBoundingClientRect().top+window.scrollY;new MutationObserver(()=>{const t=this.getBoundingClientRect().top+window.scrollY;t!==i&&(l.refresh(!0),i=t)}).observe(document.querySelector("body > main"),{childList:!0,subtree:!0,attributes:!0,characterData:!0})}setUpSlideAnimation(){r.registerPlugin(l);const o=this.slides.length,e=r.timeline({scrollTrigger:{trigger:this,start:"top top",end:"bottom bottom",scrub:!0,pin:!1,fastScrollEnd:!0}});e.set(this.slides[0],{opacity:1}),e.to(this.slides[0],{opacity:1}),this.slides.forEach((i,n)=>{const t=1/o,s=.7,c=t*n;n===0?e.to(i,{opacity:0,duration:t*s},t-t*s):e.fromTo(i,{opacity:0},{opacity:1,duration:t*s},c-t*s)}),r.set(this,{height:`${75*o+50}vh`}),r.set(this.slides[0],{opacity:1})}setTextFadeInOut(){this.querySelectorAll(".sticky-slider__item-content").forEach(e=>{r.set(e,{opacity:.2}),r.timeline({scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}}).to(e,{opacity:1,duration:.5,ease:"none"},0).to(e,{opacity:.2,duration:.5,ease:"none"},.5)})}}window.customElements.define("sticky-slider",a);
